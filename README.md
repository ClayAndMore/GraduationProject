2017年4月4日第一次创建，此时项目已经完成了一半。只是之前没有写readme。

### 写在前面

这是我的毕业设计，一个康复网站，帮助需要疾病或手术后的人进行康复信息。

主要有两个结构，一个主页面的疾病和手术管理，介绍了手术和相关疾病需要的处理手段和中西药物的治疗。

第二个页面是患者和医生之间的交流板块。是一个类似于社区的功能，有用户登陆注册，权限管理，文件上传等功能。

### 环境

window10下的pycharm 开发，python3.5。

用的flask框架，其他配置在requirements.txt下。

### 项目日志
4月5日
为了明天提交数据库的ER图，把数据库完善了下，
加了手术分级和手术表中的一对多的关系
加了帖子表，回复表，用户表之间的关系。
对帖子和手术分级之间建立多对一的关系。

4月7日
做到用户头像上传，目前上传的图片存储方式有两种，
一种是将图片解成二进制码，存到myql,取出时再次编码。
一种是将图片路径存到mysql中，用的时候读取路再显示，相比较第二种方式较好。
本项目是用第二种方式，但是存路径时，用户上传的头像名字可能重复。
没有办法读取路径名是唯一性，还有有攻击者用图片的名字可以攻击，
所以，我们采取将用户名作为图片名，保持唯一性，又能面攻击，当用户更新头像时名字不变，只是变了文件。

4月12日
由于不更改文件名，用户上传头像后，由于浏览器缓存，页面不能马上更改图片，所以将图片名字加上时间戳，
保证了唯一性并可以页面更新。

4月16日
添加了flask_admin的认证登陆，不然任何用户都可以访问/admin.
添加了外科发帖。

4月20日 
完善了发帖功能，将发帖功能集成一个公用的函数，
新发现：a标签的href可以用url_for
from flask_security.utils import login_user
中，login_user(用户对象)，如果用户对象active属性为1才能真正登陆。
将分页函数抽离出来到note_index_macro.html,用的时候在再导入。

4月21日
添加了发帖表单。
添加了用户权限数据。
完善了注册。
新建了user_blue蓝图，将用户的登陆和注册等都放到此蓝图下。

4月22日
发帖表单请求数据。
selectField 加 coerce=int 才可使检验器有效。
接下来要解决权限问题，让权限访问需要登陆时共享一个模板。

4月24日 
发现发帖类别需要联动，需要用js实现，后来考虑，不显示class2.
帖子回复问题，提醒。
后台管理时添加有关联的数据，显示问题。

解决了了医生板块的权限管理问题,以及需要登陆的问题。

4月25日
用`def __repr__(self):`解决了后台管理中数据模型显示中文名的问题.
为社区首页添加了权限显示。
添加了首页的图表统计。